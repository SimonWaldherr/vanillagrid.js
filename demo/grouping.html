<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>VanillaGrid â€¢ Grouping & Aggregation</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="../dist/vanillagrid.min.js"></script>
  <link rel="stylesheet" href="../dist/vanillagrid.min.css" />
  <style>
    * { box-sizing: border-box; }
    body { 
      padding: 24px; 
      background: linear-gradient(135deg, #ec4899 0%, #be185d 100%);
      font-family: system-ui, -apple-system, sans-serif;
      min-height: 100vh;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    .header {
      background: white;
      padding: 24px;
      border-radius: 12px;
      margin-bottom: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    .header h1 {
      margin: 0 0 8px;
      font-size: 28px;
      color: #111827;
    }
    .header p {
      margin: 0 0 16px;
      color: #6b7280;
      font-size: 16px;
    }
    .aggregations {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 12px;
      margin-top: 16px;
    }
    .agg-item {
      background: #fdf2f8;
      padding: 12px;
      border-radius: 8px;
      text-align: center;
      border: 2px solid #fbcfe8;
    }
    .agg-label {
      font-size: 12px;
      color: #9f1239;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 4px;
    }
    .agg-value {
      font-size: 16px;
      color: #881337;
      font-weight: 700;
    }
    .grid-container {
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    @media (max-width: 768px) {
      body { padding: 16px; }
      .header { padding: 16px; }
      .header h1 { font-size: 22px; }
      .grid-container { padding: 12px; }
      .aggregations { grid-template-columns: repeat(2, 1fr); }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ðŸ“¦ Grouping & Aggregation</h1>
      <p>Group data by category with automatic sum, min, max calculations and expandable groups</p>
      
      <div class="aggregations">
        <div class="agg-item">
          <div class="agg-label">Sum</div>
          <div class="agg-value">Total values</div>
        </div>
        <div class="agg-item">
          <div class="agg-label">Min</div>
          <div class="agg-value">Minimum value</div>
        </div>
        <div class="agg-item">
          <div class="agg-label">Max</div>
          <div class="agg-value">Maximum value</div>
        </div>
        <div class="agg-item">
          <div class="agg-label">Average</div>
          <div class="agg-value">Mean value</div>
        </div>
      </div>
    </div>

    <div class="grid-container">
      <div id="group-grid"></div>
    </div>
  </div>
  <script>
    const sales = Array.from({length: 50}, (_, i) => {
      const categories = ['Electronics', 'Clothing', 'Books', 'Home & Garden', 'Sports'];
      const products = {
        Electronics: ['Laptop', 'Phone', 'Tablet', 'Headphones'],
        Clothing: ['T-Shirt', 'Jeans', 'Jacket', 'Shoes'],
        Books: ['Novel', 'Textbook', 'Magazine', 'Guide'],
        'Home & Garden': ['Plant', 'Tool', 'Furniture', 'Decor'],
        Sports: ['Ball', 'Racket', 'Weights', 'Gear']
      };
      
      const category = categories[i % categories.length];
      const productList = products[category];
      const product = productList[i % productList.length];
      
      return {
        id: i + 1,
        product: `${product} ${Math.floor(i/5) + 1}`,
        category,
        price: Math.round((Math.random() * 500 + 10) * 100) / 100,
        quantity: Math.floor(Math.random() * 20) + 1,
        revenue: 0, // calculated below
        date: new Date(2024, Math.floor(Math.random() * 12), Math.floor(Math.random() * 28) + 1).toISOString().split('T')[0]
      };
    });

    // Calculate revenue
    sales.forEach(item => {
      item.revenue = Math.round(item.price * item.quantity * 100) / 100;
    });

    const grid = new VanillaGrid('#group-grid', {
      data: sales,
      columns: [
        { key: 'id', label: 'ID', type: 'number', sortable: true },
        { key: 'product', label: 'Product', sortable: true },
        { key: 'category', label: 'Category', sortable: true },
        { 
          key: 'price', 
          label: 'Price', 
          type: 'number', 
          sortable: true,
          aggregations: ['min', 'max'],
          format: (value) => `$${value.toFixed(2)}`
        },
        { 
          key: 'quantity', 
          label: 'Qty', 
          type: 'number', 
          sortable: true,
          aggregations: ['sum', 'min', 'max']
        },
        { 
          key: 'revenue', 
          label: 'Revenue', 
          type: 'number', 
          sortable: true,
          aggregations: ['sum', 'min', 'max'],
          format: (value) => `$${value.toFixed(2)}`
        },
        { key: 'date', label: 'Date', sortable: true }
      ],
      filterable: true,
      groupable: true,
      groupBy: 'category',
      pageSize: 15,
      columnsMenu: { location: 'pager', showSearch: true, showSelectAll: true }
    });
  </script>
</body>
</html>